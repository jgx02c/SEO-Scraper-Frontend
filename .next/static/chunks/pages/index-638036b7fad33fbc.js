(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2022:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6571)}])},9748:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var a=r(4848);r(6540);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100",link:"text-blue-600 underline-offset-4 hover:underline"})[e]},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"h-9 px-4 py-2",sm:"h-8 px-3 py-1 text-sm",lg:"h-10 px-8 py-3",icon:"h-9 w-9 p-2"})[e]},n=e=>{let{className:t="",children:r,variant:n="default",size:i="default",...o}=e;return(0,a.jsx)("button",{className:"\n      rounded-lg \n      font-medium \n      transition-colors \n      duration-200 \n      focus:outline-none \n      focus:ring-2 \n      focus:ring-blue-500 \n      ".concat(s(n),"\n      ").concat(l(i),"\n      ").concat(t,"\n    "),...o,children:r})}},3566:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>o,ZB:()=>i,Zp:()=>l,aR:()=>n});var a=r(4848);r(6540);var s=r(8019);let l=e=>{let{className:t="",children:r}=e;return(0,a.jsx)("div",{className:(0,s.cn)("bg-gray-800 rounded-xl shadow-lg border border-gray-700",t),children:r})},n=e=>{let{className:t="",children:r}=e;return(0,a.jsx)("div",{className:(0,s.cn)("p-6 pb-3",t),children:r})},i=e=>{let{className:t="",children:r}=e;return(0,a.jsx)("h3",{className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",t),children:r})},o=e=>{let{className:t="",children:r}=e;return(0,a.jsx)("div",{className:(0,s.cn)("p-6 space-y-4",t),children:r})}},8019:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(4164),s=r(856);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},6571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C});var a=r(4848),s=r(6540),l=r(9279);let n=(0,l.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),i=(0,l.A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),o=(0,l.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=(0,l.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),d=e=>{let{className:t="",...r}=e;return(0,a.jsx)("input",{className:"w-full px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 bg-gray-700 text-white ".concat(t),...r})};var u=r(9748),h=r(3566);let g=e=>{let{open:t,onOpenChange:r,children:s}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg",style:{width:"1200px",height:"800px"},children:[(0,a.jsx)("button",{className:"absolute top-3 right-3 text-white hover:text-gray-300",onClick:()=>r(!1),children:"âœ•"}),s]})}):null},x=e=>{let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"flex h-full w-full p-6 ".concat(r),children:t})},m=e=>{let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"mb-4 text-xl font-bold text-white ".concat(r),children:t})},v=e=>{let{children:t,className:r=""}=e;return(0,a.jsx)("h2",{className:r,children:t})},p=e=>{let{value:t,onValueChange:r,min:s,max:l,step:n}=e;return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("input",{type:"range",className:"w-full",value:t,onChange:e=>r(parseFloat(e.target.value)),min:s,max:l,step:n}),(0,a.jsx)("span",{className:"text-white",children:t.toFixed(1)})]})},f=e=>{let{value:t,onValueChange:r,children:s}=e;return(0,a.jsx)("select",{value:t,onChange:e=>r(e.target.value),className:"w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md",children:s})},y=e=>{let{value:t,children:r}=e;return(0,a.jsx)("option",{value:t,children:r})};var j=r(2732),b=r(8019);let w=(0,j.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),N=s.forwardRef((e,t)=>{let{className:r,variant:s,...l}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,b.cn)(w({variant:s}),r),...l})});N.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,b.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let k=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,b.cn)("text-sm [&_p]:leading-relaxed",r),...s})});k.displayName="AlertDescription";var S=r(6715);let C=()=>{let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(""),[j,b]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[_,E]=(0,s.useState)(""),[A,O]=(0,s.useState)(0),[T,P]=(0,s.useState)(0),[V,$]=(0,s.useState)(""),[z,D]=(0,s.useState)(""),[L,F]=(0,s.useState)(!1),[R,M]=(0,s.useState)(!1),[I,B]=(0,s.useState)(!1),[J,W]=(0,s.useState)([]),[Z,U]=(0,s.useState)(null),q=(0,s.useRef)(null),G=(0,S.useRouter)();(0,s.useEffect)(()=>{X(),K()},[]);let K=async()=>{try{F(!1);let e=await fetch("https://leaps-scraper.onrender.com/settings/get_settings");if(!e.ok)throw Error("Failed to load settings");let t=(await e.json()).data;E(t.model),O(t.temperature),P(t.presence_penalty),$(t.vectorStore),D(t.prompt),B(!0)}catch(e){console.error("Error loading settings:",e),F(!0)}},X=async()=>{try{M(!1);let e=await fetch("https://leaps-scraper.onrender.com/conversations/get_conversations");if(!e.ok)throw Error("Failed to load conversations");let t=await e.json();W(t.data||[])}catch(e){console.error("Error loading conversations:",e),M(!0),W([])}},H=async()=>{let e={id:Date.now().toString(),title:"New Conversation",messages:[],createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};return W([e,...J]),U(e.id),t([]),e.id},Q=async(e,t)=>{try{if(!(await fetch("https://leaps-scraper.onrender.com/conversations/save_conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:e,messages:t})})).ok)throw Error("Failed to save conversation")}catch(e){console.error("Error saving conversation:",e)}},Y=async()=>{try{if(!(await fetch("https://leaps-scraper.onrender.com/settings/save_settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:_,temperature:A,presence_penalty:T,vectorStore:V,prompt:z})})).ok)throw Error("Failed to save settings");C(!1),await K()}catch(e){console.error("Error saving settings:",e)}},ee=async()=>{if(!r.trim())return;let a=new Date().toISOString(),s=Z;s||(s=await H());let n=[...e,{role:"user",text:r,timestamp:a}];t(n),l(""),b(!0);try{let e=await fetch("https://leaps-scraper.onrender.com/insights/generate_insight",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,vector_store:V,model:_,temperature:A,presence_penalty:T,system_prompt:z})});if(!e.ok)throw Error("Failed to generate insight");let a=await e.json(),l={role:"bot",text:a.data,timestamp:new Date().toISOString()},i=[...n,l];t(i);let o=J.map(e=>e.id===s?{...e,messages:i,lastUpdated:new Date().toISOString(),title:r.slice(0,30)+"..."}:e);W(o),await Q(s,i)}catch(e){console.error("Error sending message:",e)}finally{b(!1)}},et=async e=>{try{let r=J.find(t=>t.id===e);r&&(t(r.messages),U(e))}catch(e){console.error("Error loading conversation:",e)}};return((0,s.useEffect)(()=>{var e;null===(e=q.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e,j]),I||L)?(0,a.jsxs)("div",{className:"flex h-screen w-full bg-gray-900 p-4",children:[(0,a.jsxs)("div",{className:"w-64 bg-gray-800 mr-4 rounded-lg flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-700 space-y-2",children:[(0,a.jsxs)(u.$,{className:"w-full bg-blue-600 text-white flex items-center justify-center gap-2",onClick:H,children:[(0,a.jsx)(n,{size:18}),"New Chat"]}),R&&(0,a.jsx)(N,{variant:"destructive",className:"bg-red-900 border-red-800",children:(0,a.jsxs)(k,{className:"flex items-center justify-between",children:["Failed to load chats",(0,a.jsxs)(u.$,{variant:"outline",size:"sm",onClick:X,className:"ml-2",children:[(0,a.jsx)(i,{size:16,className:"mr-1"}),"Retry"]})]})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:J.map(e=>(0,a.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-700 ".concat(Z===e.id?"bg-gray-700":""),onClick:()=>et(e.id),children:[(0,a.jsx)("div",{className:"text-white truncate",children:e.title}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:new Date(e.lastUpdated).toLocaleDateString()})]},e.id))})]}),(0,a.jsx)(h.Zp,{className:"flex-1 bg-gray-800 shadow-lg flex flex-col",children:(0,a.jsxs)(h.Wu,{className:"flex flex-col h-full p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-4 flex-shrink-0",children:[(0,a.jsx)(u.$,{className:"bg-blue-600 text-white",onClick:()=>G.push("/business"),children:"View Businesses"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Leaps AI ChatBot V.1.0"}),(0,a.jsx)(u.$,{className:"bg-gray-600 text-white",onClick:()=>C(!0),children:(0,a.jsx)(o,{size:18})})]}),(0,a.jsx)("div",{className:"flex-grow overflow-hidden flex flex-col min-h-0",children:(0,a.jsxs)("div",{className:"flex-grow overflow-y-auto space-y-4 bg-gray-900 p-4 rounded-lg",children:[e.map((e,t)=>(0,a.jsxs)("div",{className:"max-w-[75%] rounded-lg p-3 ".concat("user"===e.role?"ml-auto bg-blue-600 text-right text-white":"mr-auto bg-gray-700 text-white"),children:[(0,a.jsx)("div",{children:e.text}),(0,a.jsx)("div",{className:"text-xs opacity-50 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]},t)),j&&(0,a.jsx)("div",{className:"mr-auto rounded-lg bg-gray-700 p-3 text-white",children:"AI is thinking..."}),(0,a.jsx)("div",{ref:q})]})}),(0,a.jsxs)("div",{className:"flex gap-2 mt-4 flex-shrink-0",children:[(0,a.jsx)(d,{className:"flex-grow bg-gray-700 text-white placeholder-gray-400",placeholder:"Type a message...",value:r,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&ee()}),(0,a.jsx)(u.$,{onClick:ee,className:"bg-blue-600 text-white hover:bg-blue-700",children:(0,a.jsx)(c,{size:18})})]})]})}),(0,a.jsx)(g,{open:w,onOpenChange:C,children:(0,a.jsxs)(x,{className:"bg-gray-800 text-white max-w-4xl",children:[(0,a.jsx)(m,{children:(0,a.jsx)(v,{children:"Settings"})}),(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{className:"w-1/2 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{children:"Model"}),(0,a.jsxs)(f,{value:_,onValueChange:E,children:[(0,a.jsx)(y,{value:"gpt-4o-2024-08-06",children:"GPT-4o"}),(0,a.jsx)(y,{value:"gpt-4-turbo-2024-04-09",children:"GPT-4-Turbo"}),(0,a.jsx)(y,{value:"gpt-4o-mini-2024-07-18",children:"gpt-4o-mini"}),(0,a.jsx)(y,{value:"o1-mini-2024-09-12",children:"o1-mini"}),(0,a.jsx)(y,{value:"o1-preview-2024-09-12",children:"o1-preview"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{children:["Temperature: ",A]}),(0,a.jsx)(p,{value:A,onValueChange:e=>O(e),min:0,max:1,step:.1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{children:["Presence Penalty: ",T]}),(0,a.jsx)(p,{value:T,onValueChange:e=>P(e),min:0,max:1,step:.1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{children:"Vector Store"}),(0,a.jsxs)(f,{value:V,onValueChange:$,children:[(0,a.jsx)(y,{value:"leaps",children:"Leaps"}),(0,a.jsx)(y,{value:"leapsjson",children:"Leaps Json"})]})]}),(0,a.jsx)(u.$,{onClick:Y,className:"w-full bg-blue-600",children:"Save Settings"})]}),(0,a.jsxs)("div",{className:"w-1/2 space-y-2",children:[(0,a.jsx)("label",{children:"System Prompt"}),(0,a.jsx)("textarea",{value:z,onChange:e=>D(e.target.value),className:"w-full h-[400px] min-h-[200px] bg-gray-700 rounded p-2 resize",style:{resize:"both"}})]})]})]})})]}):(0,a.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-900",children:(0,a.jsx)("div",{className:"text-white",children:"Loading settings..."})})}},2732:(e,t,r)=>{"use strict";r.d(t,{F:()=>n});var a=r(4164);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=a.$,n=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:i}=t,o=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;let l=s(t)||s(a);return n[e][l]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return l(e,o,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},9279:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(6540);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:l("lucide",c),...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...c}=r;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(s(e)),o),...c})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[401,636,593,792],()=>t(2022)),_N_E=e.O()}]);