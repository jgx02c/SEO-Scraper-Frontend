(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{44:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/details/[id]",function(){return r(8557)}])},9748:(e,s,r)=>{"use strict";r.d(s,{$:()=>l});var t=r(4848);r(6540);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100",link:"text-blue-600 underline-offset-4 hover:underline"})[e]},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"h-9 px-4 py-2",sm:"h-8 px-3 py-1 text-sm",lg:"h-10 px-8 py-3",icon:"h-9 w-9 p-2"})[e]},l=e=>{let{className:s="",children:r,variant:l="default",size:i="default",...c}=e;return(0,t.jsx)("button",{className:"\n      rounded-lg \n      font-medium \n      transition-colors \n      duration-200 \n      focus:outline-none \n      focus:ring-2 \n      focus:ring-blue-500 \n      ".concat(a(l),"\n      ").concat(n(i),"\n      ").concat(s,"\n    "),...c,children:r})}},3566:(e,s,r)=>{"use strict";r.d(s,{Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l});var t=r(4848);r(6540);var a=r(8019);let n=e=>{let{className:s="",children:r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("bg-gray-800 rounded-xl shadow-lg border border-gray-700",s),children:r})},l=e=>{let{className:s="",children:r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("p-6 pb-3",s),children:r})},i=e=>{let{className:s="",children:r}=e;return(0,t.jsx)("h3",{className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",s),children:r})},c=e=>{let{className:s="",children:r}=e;return(0,t.jsx)("div",{className:(0,a.cn)("p-6 space-y-4",s),children:r})}},8019:(e,s,r)=>{"use strict";r.d(s,{cn:()=>n});var t=r(4164),a=r(856);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.QP)((0,t.$)(s))}},8557:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>N});var t=r(4848),a=r(6540),n=r(6715),l=r(3566),i=r(9748),c=r(8298),d=r(2732),o=r(8019);let x=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/20 text-green-400 hover:bg-green-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30"}},defaultVariants:{variant:"default"}});function h(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,o.cn)(x({variant:r}),s),...a})}var u=r(6552);let g=a.forwardRef((e,s)=>{let{className:r,children:a,...n}=e;return(0,t.jsxs)(u.bL,{ref:s,className:(0,o.cn)("relative overflow-hidden",r),...n,children:[(0,t.jsx)(u.LM,{className:(0,o.cn)("h-full w-full rounded-[inherit]"),children:a}),(0,t.jsx)(m,{}),(0,t.jsx)(u.OK,{})]})});g.displayName=u.bL.displayName;let m=a.forwardRef((e,s)=>{let{className:r,orientation:a="vertical",...n}=e;return(0,t.jsx)(u.VM,{ref:s,orientation:a,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...n,children:(0,t.jsx)(u.lr,{className:(0,o.cn)("relative flex-1 rounded-full bg-border")})})});m.displayName=u.VM.displayName;var b=r(1017),p=r(2265),j=r(5496),f=r(9962);let v=e=>{var s,r;let{report:a}=e;if(!a)return(0,t.jsx)(l.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,t.jsx)(l.Wu,{children:(0,t.jsx)("p",{className:"text-center text-gray-400",children:"No report data available"})})});let n=e=>a.insights_count[e]||0,i=e=>a.insights_breakdown?Object.entries(a.insights_breakdown).filter(s=>{let[r]=s;return"Good Practice"===e?r.includes("Good practice for SEO"):"Needs Attention"===e?r.includes("missing alt text")||r.includes("Consider adding more content"):r.includes("No canonical tag")||r.includes("No meta description")}).map(e=>{let[s,r]=e;return{insight:s,count:r}}):[],c=e=>{switch(e){case"Immediate Action Required":return"text-red-400 bg-red-950 border-red-800";case"Needs Attention":return"text-yellow-400 bg-yellow-950 border-yellow-800";case"Good Practice":return"text-green-400 bg-green-950 border-green-800";default:return"text-gray-400 bg-gray-950 border-gray-800"}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(l.Zp,{className:"bg-red-950/50 border-red-800",children:[(0,t.jsx)(l.aR,{className:"pb-2",children:(0,t.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(b.A,{className:"w-5 h-5 text-red-400"}),(0,t.jsx)("span",{children:"Critical Issues"})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-red-400 mb-2",children:n("Immediate Action Required")}),(0,t.jsx)(g,{className:"h-32",children:i("Immediate Action Required").map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsxs)(h,{variant:"destructive",className:"shrink-0",children:[e.count,"x"]}),(0,t.jsx)("span",{className:"text-sm text-red-200",children:e.insight})]},s))})]})]}),(0,t.jsxs)(l.Zp,{className:"bg-yellow-950/50 border-yellow-800",children:[(0,t.jsx)(l.aR,{className:"pb-2",children:(0,t.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.A,{className:"w-5 h-5 text-yellow-400"}),(0,t.jsx)("span",{children:"Warnings"})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:n("Needs Attention")}),(0,t.jsx)(g,{className:"h-32",children:i("Needs Attention").map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsxs)(h,{variant:"warning",className:"bg-yellow-900 text-yellow-200 shrink-0",children:[e.count,"x"]}),(0,t.jsx)("span",{className:"text-sm text-yellow-200",children:e.insight})]},s))})]})]}),(0,t.jsxs)(l.Zp,{className:"bg-green-950/50 border-green-800",children:[(0,t.jsx)(l.aR,{className:"pb-2",children:(0,t.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(j.A,{className:"w-5 h-5 text-green-400"}),(0,t.jsx)("span",{children:"Good Practices"})]})}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-400 mb-2",children:n("Good Practice")}),(0,t.jsx)(g,{className:"h-32",children:i("Good Practice").map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsxs)(h,{variant:"success",className:"bg-green-900 text-green-200 shrink-0",children:[e.count,"x"]}),(0,t.jsx)("span",{className:"text-sm text-green-200",children:e.insight})]},s))})]})]})]}),(0,t.jsxs)(l.Zp,{className:"bg-gray-800/50 border-gray-700",children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.A,{className:"w-5 h-5"}),(0,t.jsxs)("span",{children:["Page Reports (",(null===(s=a.page_reports)||void 0===s?void 0:s.length)||0,")"]})]})}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(g,{className:"h-96",children:(0,t.jsx)("div",{className:"space-y-4",children:null===(r=a.page_reports)||void 0===r?void 0:r.map((e,s)=>(0,t.jsx)(l.Zp,{className:"bg-gray-900/50 border-gray-700",children:(0,t.jsxs)(l.Wu,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-lg mb-3 text-blue-400 break-all",children:e.website_url}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,t.jsxs)(h,{variant:"destructive",className:"justify-center",children:["Critical: ",e.insights_count["Immediate Action Required"]]}),(0,t.jsxs)(h,{variant:"warning",className:"bg-yellow-900 text-yellow-200 justify-center",children:["Warnings: ",e.insights_count["Needs Attention"]]}),(0,t.jsxs)(h,{variant:"success",className:"bg-green-900 text-green-200 justify-center",children:["Good: ",e.insights_count["Good Practice"]]})]}),(0,t.jsx)("div",{className:"space-y-2",children:e.error_citations.map((e,s)=>(0,t.jsx)("div",{className:"p-3 rounded-md ".concat(c(e.section)),children:e.insight},s))})]})},s))})})})]})]})},N=()=>{var e,s,r;let d=(0,n.useRouter)(),{id:o}=d.query,[x,h]=(0,a.useState)(null),[u,g]=(0,a.useState)([]),[m,b]=(0,a.useState)(null),[p,j]=(0,a.useState)(!0),[f,N]=(0,a.useState)("report"),[y,w]=(0,a.useState)(null),[_,k]=(0,a.useState)(null),[A,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!o)return;let e=async()=>{try{let e=await fetch("https://leaps-scraper.onrender.com/report/get_report_for_business/".concat(o)),s=await e.json();console.log("API Response:",s),s&&s.data?b(s.data):(console.error("Invalid report data structure:",s),b(null))}catch(e){console.error("Error fetching report:",e),b(null)}finally{j(!1)}};(async()=>{try{let e=await fetch("https://leaps-scraper.onrender.com/business/get_business_by_id/".concat(o)),s=await e.json();h(s.data)}catch(e){console.error("Error fetching business details:",e)}})(),e()},[o]);let C=async()=>{if(o)try{let e=await fetch("https://leaps-scraper.onrender.com/pages/get_pages_by_business_id/".concat(o)),s=await e.json();g(s.data||[])}catch(e){console.error("Error fetching webpages:",e)}},E=async e=>{w(e),R(!0);try{var s,r;let t=await fetch("https://leaps-scraper.onrender.com/pages/get_page_by_id/".concat(e._id)),a=await t.json();k((null===(r=a.data)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.content)||"No content available.")}catch(e){console.error("Error fetching webpage content:",e),k("Error loading page content.")}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 p-6 text-white",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)(i.$,{className:"bg-blue-600 text-white",onClick:()=>d.push("/business"),children:"Back to Businesses"}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Business Details"})]}),(0,t.jsxs)("div",{className:"flex space-x-4 border-b border-gray-700 mb-6",children:[(0,t.jsx)("button",{className:"p-2 font-semibold ".concat("report"===f?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>N("report"),children:"Report"}),(0,t.jsx)("button",{className:"p-2 font-semibold ".concat("webpages"===f?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>{N("webpages"),C()},children:"Webpages"}),(0,t.jsx)("button",{className:"p-2 font-semibold ".concat("overview"===f?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>N("overview"),children:"Overview"})]}),p?(0,t.jsx)("p",{className:"text-center",children:"Loading business details..."}):x?(0,t.jsx)(l.Zp,{className:"bg-gray-800 shadow-lg",children:(0,t.jsxs)(l.Wu,{className:"p-6",children:["report"===f&&(0,t.jsx)(v,{report:m}),"webpages"===f&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Loaded Webpages"}),u.length>0?(0,t.jsx)("ul",{className:"space-y-3",children:u.map(e=>(0,t.jsx)("li",{className:"p-3 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition",onClick:()=>E(e),children:(0,t.jsx)("p",{className:"text-gray-300",children:e.filename})},e._id))}):(0,t.jsx)("p",{className:"text-gray-400",children:"No webpages available."})]}),"overview"===f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-3xl font-bold",children:x.name}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:x.description})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Contact Information"}),(0,t.jsx)("p",{children:(null===(e=x.contact_information)||void 0===e?void 0:e.address)||"No Address Available"}),(0,t.jsx)("p",{children:(null===(s=x.contact_information)||void 0===s?void 0:s.email)||"No Email Available"}),(0,t.jsx)("p",{children:(null===(r=x.contact_information)||void 0===r?void 0:r.phone)||"No Phone Available"})]})]})]})}):(0,t.jsx)("p",{className:"text-center",children:"Business not found."}),(0,t.jsxs)(c.lG,{open:A,onClose:()=>R(!1),children:[(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50","aria-hidden":"true"}),(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl h-4/5 flex flex-col bg-gray-800 rounded-lg shadow-xl mx-4",children:[(0,t.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-100",children:null==y?void 0:y.filename})}),(0,t.jsx)("div",{className:"flex-1 min-h-0 p-4",children:(0,t.jsx)("div",{className:"h-full overflow-y-auto bg-gray-900 rounded-lg border border-gray-700 p-4",children:(0,t.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:_||"Loading..."})})}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(i.$,{onClick:()=>R(!1),className:"bg-red-600 hover:bg-red-700 text-white",children:"Close"})})})]})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[401,646,636,593,792],()=>s(44)),_N_E=e.O()}]);