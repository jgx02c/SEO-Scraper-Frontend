(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[126],{4996:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return r(4059)}])},7722:(e,t,r)=>{"use strict";r.d(t,{BD:()=>i,Hh:()=>l,Jv:()=>n});let a="http://127.0.0.1:8000",s=async e=>{let t=await e.json();if(!e.ok)throw Error(t.detail||"API request failed");return t},n=async(e,t)=>{try{let r=await fetch("".concat(a,"/api/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}),n=await s(r);return n.token&&localStorage.setItem("jwt_token",n.token),{success:!0,token:n.token,token_type:n.token_type,user:n.user}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},l=async(e,t,r)=>{try{let n=await fetch("".concat(a,"/api/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}),l=await s(n);return l.token&&localStorage.setItem("jwt_token",l.token),{success:!0,token:l.token,token_type:l.token_type,user:l.user}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},i=async e=>{try{let t=await fetch("".concat(a,"/api/auth/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),r=await s(t);return{success:!0,message:r.message}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}}},9540:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>o,TN:()=>c});var a=r(4848),s=r(6540),n=r(2732),l=r(8019);let i=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:s}),r),...n})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...s})});c.displayName="AlertDescription"},9748:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(4848);r(6540);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100",link:"text-blue-600 underline-offset-4 hover:underline",purple:"bg-indigo-600 text-white hover:bg-indigo-600"})[e]},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"h-9 px-4 py-2",sm:"h-8 px-3 py-1 text-sm",lg:"h-12 px-8 py-3",icon:"h-9 w-9 p-2"})[e]},l=e=>{let{className:t="",children:r,variant:l="default",size:i="default",...o}=e;return(0,a.jsx)("button",{className:"\n      rounded-lg \n      font-medium \n      transition-colors \n      duration-200 \n      focus:outline-none \n      focus:ring-2 \n      focus:ring-blue-500 \n      ".concat(s(l),"\n      ").concat(n(i),"\n      ").concat(t,"\n    "),...o,children:r})}},5130:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var a=r(4848);r(6540);let s=e=>{let{className:t="",...r}=e;return(0,a.jsx)("input",{className:"w-full px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 bg-gray-700 text-white ".concat(t),...r})}},8019:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(4164),s=r(856);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4059:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(4848),s=r(6540),n=r(6715),l=r(9748),i=r(5130),o=r(9540),c=r(1106),d=r.n(c),u=r(3787),m=r(154),g=r(7722);let h=async e=>{let t=await e.json();if(!e.ok)throw Error(t.detail||"API request failed");return t},p=()=>{let e=localStorage.getItem("jwt_token");if(!e)throw Error("No authentication token found");return{Authorization:"Bearer ".concat(e)}},x=async()=>{try{let e=p(),t=await fetch("".concat("http://127.0.0.1:8000","/api/users/state"),{headers:e}),r=await h(t);return{success:!0,state:r.state}}catch(e){return console.error("Error checking user state:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},y=()=>{let e=(0,n.useRouter)(),[t,r]=(0,s.useState)({email:"",password:""}),[c,h]=(0,s.useState)(!1),[p,y]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),b=async r=>{r.preventDefault(),y(null),h(!0);try{let r=await (0,g.Jv)(t.email,t.password);if(!r.success||!r.token)throw Error(r.error||"Failed to sign in");let a=await x();if(!a.success||!a.state)throw Error("Failed to get user state");a.state.hasCompletedOnboarding?(console.log("The user has finished the onboarding"),e.push("/dashboard")):e.push("/onboarding")}catch(e){y(e instanceof Error?e.message:"An error occurred"),h(!1)}},w=async e=>{if(e.preventDefault(),!t.email){y("Please enter your email address");return}y(null),h(!0);try{let e=await (0,g.BD)(t.email);if(!e.success)throw Error(e.error||"Failed to send reset email");y("Password reset instructions sent to your email")}catch(e){y(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-indigo-900/20 to-gray-900 flex flex-col items-center justify-center p-6 relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#1f29370a_1px,transparent_1px),linear-gradient(to_bottom,#1f29370a_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_50%,#000_70%,transparent_100%)]"}),(0,a.jsx)("div",{className:"absolute top-6 left-6",children:(0,a.jsxs)(l.$,{variant:"ghost",onClick:()=>e.push("/"),className:"text-gray-400 hover:text-indigo-400 hover:bg-transparent h-auto py-2 flex items-center",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-left",children:"Back to home"})]})}),(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8 bg-gray-800/50 backdrop-blur-xl p-8 rounded-xl border border-gray-700/50 relative z-10",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Welcome Back"}),(0,a.jsx)("p",{className:"mt-2 text-gray-400",children:f?"Reset your password":"Sign in to your account"})]}),p&&(0,a.jsx)(o.Fc,{variant:p.includes("sent to your email")?"default":"destructive",children:(0,a.jsx)(o.TN,{children:p})}),f?(0,a.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"reset-email",className:"text-sm font-medium text-gray-300",children:"Email"}),(0,a.jsx)(i.p,{id:"reset-email",type:"email",required:!0,placeholder:"you@example.com",className:"w-full bg-gray-700/50 text-white border-gray-600",value:t.email,onChange:e=>r({...t,email:e.target.value}),disabled:c})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(l.$,{type:"submit",variant:"purple",className:"w-full",disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset link..."]}):"Send Reset Link"}),(0,a.jsx)(l.$,{type:"button",variant:"outline",className:"w-full text-indigo-400 border-indigo-600 hover:bg-indigo-600/10",onClick:()=>v(!1),disabled:c,children:"Back to Sign In"})]})]}):(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-gray-300",children:"Email"}),(0,a.jsx)(i.p,{id:"email",type:"email",required:!0,placeholder:"you@example.com",className:"w-full bg-gray-700/50 text-white border-gray-600",value:t.email,onChange:e=>r({...t,email:e.target.value}),disabled:c})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{htmlFor:"password",className:"text-sm font-medium text-gray-300",children:"Password"}),(0,a.jsx)(i.p,{id:"password",type:"password",required:!0,placeholder:"••••••••",className:"w-full bg-gray-700/50 text-white border-gray-600",value:t.password,onChange:e=>r({...t,password:e.target.value}),disabled:c})]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("button",{type:"button",onClick:()=>v(!0),className:"text-sm text-indigo-400 hover:text-indigo-300 transition-colors",children:"Forgot your password?"})}),(0,a.jsx)(l.$,{type:"submit",variant:"purple",className:"w-full",disabled:c,children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),(0,a.jsxs)("div",{className:"space-y-4 text-center",children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Or"}),(0,a.jsxs)("p",{className:"text-gray-400",children:["Don't have an account?"," ",(0,a.jsx)(d(),{href:"/signup",className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:"Sign up"})]})]})]})]})}},2732:(e,t,r)=>{"use strict";r.d(t,{F:()=>l});var a=r(4164);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,l=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:l,defaultVariants:i}=t,o=Object.keys(l).map(e=>{let t=null==r?void 0:r[e],a=null==i?void 0:i[e];if(null===t)return null;let n=s(t)||s(a);return l[e][n]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,o,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},3787:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9279).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},154:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9279).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[914,399,636,593,792],()=>t(4996)),_N_E=e.O()}]);