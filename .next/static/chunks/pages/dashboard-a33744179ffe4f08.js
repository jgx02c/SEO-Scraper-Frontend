(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{2733:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(6292)}])},9748:(e,s,t)=>{"use strict";t.d(s,{$:()=>l});var a=t(4848);t(6540);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100",link:"text-blue-600 underline-offset-4 hover:underline"})[e]},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"h-9 px-4 py-2",sm:"h-8 px-3 py-1 text-sm",lg:"h-10 px-8 py-3",icon:"h-9 w-9 p-2"})[e]},l=e=>{let{className:s="",children:t,variant:l="default",size:i="default",...c}=e;return(0,a.jsx)("button",{className:"\n      rounded-lg \n      font-medium \n      transition-colors \n      duration-200 \n      focus:outline-none \n      focus:ring-2 \n      focus:ring-blue-500 \n      ".concat(r(l),"\n      ").concat(n(i),"\n      ").concat(s,"\n    "),...c,children:t})}},5130:(e,s,t)=>{"use strict";t.d(s,{p:()=>r});var a=t(4848);t(6540);let r=e=>{let{className:s="",...t}=e;return(0,a.jsx)("input",{className:"w-full px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 bg-gray-700 text-white ".concat(s),...t})}},8019:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(4164),r=t(856);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},6292:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>en});var a=t(4848),r=t(6540),n=t(6715),l=t(8019);let i=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("bg-gray-800 rounded-xl shadow-lg border border-gray-700",s),children:t})},c=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("p-6 pb-3",s),children:t})},o=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("h3",{className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),children:t})},d=e=>{let{className:s="",children:t}=e;return(0,a.jsx)("div",{className:(0,l.cn)("p-6 space-y-4",s),children:t})};var x=t(3545),m=t(7049);let h=x.bL,g=x.l9;x.YJ,x.ZL,x.Pb,x.z6,r.forwardRef((e,s)=>{let{className:t,inset:r,children:n,...i}=e;return(0,a.jsxs)(x.ZP,{ref:s,className:(0,l.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...i,children:[n,(0,a.jsx)(m.vKP,{className:"ml-auto h-4 w-4"})]})}).displayName=x.ZP.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.G5,{ref:s,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=x.G5.displayName;let p=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(x.ZL,{children:(0,a.jsx)(x.UC,{ref:s,sideOffset:r,className:(0,l.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});p.displayName=x.UC.displayName;let u=r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(x.q7,{ref:s,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...n})});u.displayName=x.q7.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:n,...i}=e;return(0,a.jsxs)(x.H_,{ref:s,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(x.VF,{children:(0,a.jsx)(m.Srz,{className:"h-4 w-4"})})}),r]})}).displayName=x.H_.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(x.hN,{ref:s,className:(0,l.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(x.VF,{children:(0,a.jsx)(m.RiX,{className:"h-4 w-4 fill-current"})})}),r]})}).displayName=x.hN.displayName,r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(x.JU,{ref:s,className:(0,l.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n})}).displayName=x.JU.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.wv,{ref:s,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",t),...r})});f.displayName=x.wv.displayName;let b=(0,t(2732).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500/20 text-green-400 hover:bg-green-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30"}},defaultVariants:{variant:"default"}});function j(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(b({variant:t}),s),...r})}var y=t(5339);let v=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(y.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",t),...n,children:[(0,a.jsx)(y.LM,{className:(0,l.cn)("h-full w-full rounded-[inherit]"),children:r}),(0,a.jsx)(N,{}),(0,a.jsx)(y.OK,{})]})});v.displayName=y.bL.displayName;let N=r.forwardRef((e,s)=>{let{className:t,orientation:r="vertical",...n}=e;return(0,a.jsx)(y.VM,{ref:s,orientation:r,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:(0,a.jsx)(y.lr,{className:(0,l.cn)("relative flex-1 rounded-full bg-border")})})});N.displayName=y.VM.displayName;var w=t(9962);let _=e=>{let{value:s,onValueChange:t,children:r}=e;return(0,a.jsx)("select",{value:s,onChange:e=>t(e.target.value),className:"w-full p-2 bg-gray-700 text-white border border-gray-600 rounded-md",children:r})},S=e=>{let{value:s,children:t}=e;return(0,a.jsx)("option",{value:s,children:t})},C=e=>{var s;let{report:t}=e,[n,l]=(0,r.useState)("page-reports");if(!t)return(0,a.jsx)(i,{className:"bg-gray-800/50 border-gray-700",children:(0,a.jsx)(d,{children:(0,a.jsx)("p",{className:"text-center text-gray-400",children:"No report data available"})})});let c=e=>{switch(e){case"Immediate Action Required":return"text-red-400 bg-red-950 border-red-800";case"Needs Attention":return"text-yellow-400 bg-yellow-950 border-yellow-800";case"Good Practice":return"text-green-400 bg-green-950 border-green-800";default:return"text-gray-400 bg-gray-950 border-gray-800"}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"w-5 h-5"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-white",children:(()=>{switch(n){case"page-reports":var e;return"Page Reports (".concat((null===(e=t.page_reports)||void 0===e?void 0:e.length)||0,")");case"seo-reports":return"SEO Reports";case"performance-reports":return"Performance Reports";default:return"Reports"}})()})]}),(0,a.jsx)("div",{className:"w-[180px]",children:(0,a.jsxs)(_,{value:n,onValueChange:l,children:[(0,a.jsx)(S,{value:"page-reports",children:"Page Reports"}),(0,a.jsx)(S,{value:"seo-reports",children:"SEO Reports"}),(0,a.jsx)(S,{value:"performance-reports",children:"Performance Reports"})]})})]}),"page-reports"===n&&(0,a.jsx)(v,{className:"h-[calc(100vh-280px)] min-h-[500px]",children:(0,a.jsx)("div",{className:"space-y-4 pr-4",children:null===(s=t.page_reports)||void 0===s?void 0:s.map((e,s)=>(0,a.jsx)(i,{className:"bg-gray-800/50 border-gray-700",children:(0,a.jsxs)(d,{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-lg mb-3 text-blue-400 break-all",children:e.website_url}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,a.jsxs)(j,{variant:"destructive",className:"justify-center",children:["Critical: ",e.insights_count["Immediate Action Required"]]}),(0,a.jsxs)(j,{variant:"warning",className:"bg-yellow-900 text-yellow-200 justify-center",children:["Warnings: ",e.insights_count["Needs Attention"]]}),(0,a.jsxs)(j,{variant:"success",className:"bg-green-900 text-green-200 justify-center",children:["Good: ",e.insights_count["Good Practice"]]})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.error_citations.map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded-md ".concat(c(e.section)),children:e.insight},s))})]})},s))})}),"seo-reports"===n&&(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"SEO Reports coming soon"}),"performance-reports"===n&&(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Performance Reports coming soon"})]})};var k=t(9130),R=t(8706),P=t(2520),A=t(8249),B=t(9356),E=t(9604),I=t(3258);let O=e=>{let{business:s}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold flex items-center gap-4",children:[s.name,s.website&&(0,a.jsxs)("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1",children:[s.website,(0,a.jsx)(k.A,{size:16})]})]}),(0,a.jsx)("p",{className:"text-gray-400 mt-2",children:s.description})]}),s.additional_info&&(0,a.jsxs)(i,{className:"bg-gray-800/50 border-gray-700",children:[(0,a.jsx)(c,{children:(0,a.jsxs)(o,{className:"flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"w-5 h-5"}),"BBB Information"]})}),(0,a.jsxs)(d,{className:"space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Rating:"})," ",s.additional_info.BBB_rating]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Accreditation:"})," ",s.additional_info.BBB_accreditation]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Reason:"})," ",s.additional_info.BBB_reason_for_rating]})]})]}),s.contact_information&&(0,a.jsxs)(i,{className:"bg-gray-800/50 border-gray-700",children:[(0,a.jsx)(c,{children:(0,a.jsx)(o,{children:"Contact Information"})}),(0,a.jsxs)(d,{className:"space-y-2",children:[s.contact_information.address&&(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"w-4 h-4"}),s.contact_information.address]}),s.contact_information.email&&(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4"}),s.contact_information.email]}),s.contact_information.phone&&(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)(B.A,{className:"w-4 h-4"}),s.contact_information.phone]})]})]}),s.benefits&&s.benefits.length>0&&(0,a.jsxs)(i,{className:"bg-gray-800/50 border-gray-700",children:[(0,a.jsx)(c,{children:(0,a.jsx)(o,{children:"Benefits"})}),(0,a.jsx)(d,{children:(0,a.jsx)("ul",{className:"list-disc list-inside space-y-2",children:s.benefits.map((e,s)=>(0,a.jsx)("li",{className:"text-gray-300",children:e},s))})})]}),s.products&&s.products.length>0&&(0,a.jsxs)(i,{className:"bg-gray-800/50 border-gray-700",children:[(0,a.jsx)(c,{children:(0,a.jsx)(o,{children:"Products"})}),(0,a.jsx)(d,{children:(0,a.jsx)("div",{className:"grid gap-4",children:s.products.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-lg",children:e.name}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:e.description}),(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm mt-2 inline-flex items-center gap-1",children:["View Product",(0,a.jsx)(k.A,{size:14})]})]},s))})})]}),s.customer_reviews&&s.customer_reviews.length>0&&(0,a.jsxs)(i,{className:"bg-gray-800/50 border-gray-700",children:[(0,a.jsx)(c,{children:(0,a.jsx)(o,{children:"Customer Reviews"})}),(0,a.jsx)(d,{children:(0,a.jsx)("div",{className:"grid gap-4",children:s.customer_reviews.map((e,s)=>(0,a.jsxs)("div",{className:"border border-gray-700 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"italic text-gray-300",children:e.comment}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-400",children:[e.name,", ",e.age," • ",e.location]})]},s))})})]}),s.promotions&&s.promotions.length>0&&(0,a.jsxs)(i,{className:"bg-gray-800/50 border-gray-700",children:[(0,a.jsx)(c,{children:(0,a.jsxs)(o,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"w-5 h-5"}),"Current Promotions"]})}),(0,a.jsx)(d,{children:s.promotions.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-lg text-blue-400",children:e.discount}),(0,a.jsx)(j,{variant:"secondary",children:e.title}),(0,a.jsx)("p",{className:"text-gray-400",children:e.details})]},s))})]}),s.social_media&&s.social_media.length>0&&(0,a.jsx)("div",{className:"flex gap-2",children:s.social_media.map((e,s)=>(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors",children:"Facebook"===e.platform&&(0,a.jsx)(I.A,{})},s))})]})};var T=t(8298),L=t(9748);let z=e=>{let{webpages:s,onPageClick:t}=e,[n,l]=(0,r.useState)(null),[i,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),x=async e=>{l(e),d(!0),c(await t(e))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Loaded Webpages"}),s.length>0?(0,a.jsx)("ul",{className:"space-y-3",children:s.map(e=>(0,a.jsx)("li",{className:"p-3 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition",onClick:()=>x(e),children:(0,a.jsx)("p",{className:"text-gray-300",children:e.filename})},e._id))}):(0,a.jsx)("p",{className:"text-gray-400",children:"No webpages available."}),(0,a.jsxs)(T.lG,{open:o,onClose:()=>d(!1),children:[(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50","aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-hidden",children:(0,a.jsxs)("div",{className:"w-full max-w-3xl h-4/5 flex flex-col bg-gray-800 rounded-lg shadow-xl mx-4",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-100",children:null==n?void 0:n.filename})}),(0,a.jsx)("div",{className:"flex-1 min-h-0 p-4",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto bg-gray-900 rounded-lg border border-gray-700 p-4",children:(0,a.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:i||"Loading..."})})}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(L.$,{onClick:()=>d(!1),className:"bg-red-600 hover:bg-red-700 text-white",children:"Close"})})})]})})]})]})},F=e=>{let{activeTab:s,onTabChange:t,leftTabs:r,rightTabs:n}=e;return(0,a.jsxs)("div",{className:"flex justify-between border-b border-gray-700 mb-6",children:[(0,a.jsx)("div",{className:"flex space-x-4",children:r.map(e=>(0,a.jsx)("button",{className:"p-2 font-semibold ".concat(s===e.id?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>t(e.id),children:e.label},e.id))}),(0,a.jsx)("div",{className:"flex space-x-4",children:n.map(e=>(0,a.jsx)("button",{className:"p-2 font-semibold ".concat(s===e.id?"border-b-2 border-blue-500 text-blue-400":"text-gray-400"),onClick:()=>t(e.id),children:e.label},e.id))})]})};var G=t(6390),V=t(4175),D=t(5044),q=t(5130);let J=e=>{let{open:s,onOpenChange:t,children:r}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg",style:{width:"1200px",height:"800px"},children:[(0,a.jsx)("button",{className:"absolute top-3 right-3 text-white hover:text-gray-300",onClick:()=>t(!1),children:"✕"}),r]})}):null},U=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"flex h-full w-full p-6 ".concat(t),children:s})},$=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"mb-4 text-xl font-bold text-white ".concat(t),children:s})},K=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("h2",{className:t,children:s})},M=e=>{let{value:s,onValueChange:t,min:r,max:n,step:l}=e;return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsx)("input",{type:"range",className:"w-full",value:s[0],onChange:e=>t([parseFloat(e.target.value)]),min:r,max:n,step:l}),(0,a.jsx)("span",{className:"text-white",children:s[0].toFixed(1)})]})},W="https://leaps-scraper.onrender.com",Z={getSettings:async()=>{let e=await fetch("".concat(W,"/settings/get_settings"));if(!e.ok)throw Error("Failed to load settings");return(await e.json()).data},saveSettings:async e=>{if(!(await fetch("".concat(W,"/settings/save_settings"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save settings")},getConversations:async()=>{let e=await fetch("".concat(W,"/conversations/get_conversations"));if(!e.ok)throw Error("Failed to load conversations");return(await e.json()).data||[]},saveConversation:async(e,s)=>{if(!(await fetch("".concat(W,"/conversations/save_conversation"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:e,messages:s})})).ok)throw Error("Failed to save conversation")},generateInsight:async(e,s)=>{let t=await fetch("".concat(W,"/insights/generate_insight"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,...s})});if(!t.ok)throw Error("Failed to generate insight");return(await t.json()).data}},X=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)({model:"",temperature:0,presence_penalty:0,vectorStore:"",prompt:""}),[m,h]=(0,r.useState)([]),[g,p]=(0,r.useState)(null),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{b(),f()},[]),(0,r.useEffect)(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e,l]);let f=async()=>{try{let e=await Z.getSettings();x(e)}catch(e){console.error("Error loading settings:",e)}},b=async()=>{try{let e=await Z.getConversations();h(e)}catch(e){console.error("Error loading conversations:",e)}},j=async()=>{let e={id:Date.now().toString(),title:"New Conversation",messages:[],createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};return h([e,...m]),p(e.id),s([]),e.id},y=async()=>{if(!t.trim())return;let a={role:"user",text:t,timestamp:new Date().toISOString()},r=g;r||(r=await j()),s(e=>[...e,a]),n(""),i(!0);try{let n=await Z.generateInsight(t,d),l={role:"bot",text:n,timestamp:new Date().toISOString()},i=[...e,a,l];s(i);let c=m.map(e=>e.id===r?{...e,messages:i,lastUpdated:new Date().toISOString(),title:t.slice(0,30)+"..."}:e);h(c),await Z.saveConversation(r,i)}catch(e){console.error("Error sending message:",e)}finally{i(!1)}},v=e=>{let t=m.find(s=>s.id===e);t&&(s(t.messages),p(e))},N=async()=>{try{await Z.saveSettings(d),o(!1)}catch(e){console.error("Error saving settings:",e)}};return(0,a.jsxs)("div",{className:"flex h-full bg-gray-900",children:[(0,a.jsxs)("div",{className:"w-64 bg-gray-800 mr-4 rounded-lg flex flex-col",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,a.jsxs)(L.$,{className:"w-full bg-blue-600 text-white flex items-center justify-center gap-2",onClick:j,children:[(0,a.jsx)(G.A,{size:18}),"New Chat"]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:m.map(e=>(0,a.jsxs)("div",{className:"p-3 cursor-pointer hover:bg-gray-700 ".concat(g===e.id?"bg-gray-700":""),onClick:()=>v(e.id),children:[(0,a.jsx)("div",{className:"text-white truncate",children:e.title}),(0,a.jsx)("div",{className:"text-gray-400 text-sm",children:new Date(e.lastUpdated).toLocaleDateString()})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-800 rounded-lg flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 flex justify-between items-center border-b border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"Leaps AI ChatBot"}),(0,a.jsx)(L.$,{onClick:()=>o(!0),className:"bg-gray-700",children:(0,a.jsx)(V.A,{size:18})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map((e,s)=>(0,a.jsxs)("div",{className:"max-w-[75%] ".concat("user"===e.role?"ml-auto bg-blue-600 text-white":"mr-auto bg-gray-700 text-white"," rounded-lg p-3"),children:[(0,a.jsx)("div",{children:e.text}),(0,a.jsx)("div",{className:"text-xs opacity-50 mt-1",children:new Date(e.timestamp).toLocaleTimeString()})]},s)),l&&(0,a.jsx)("div",{className:"mr-auto bg-gray-700 text-white rounded-lg p-3",children:"AI is thinking..."}),(0,a.jsx)("div",{ref:u})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(q.p,{className:"flex-1 bg-gray-700 text-white",placeholder:"Type a message...",value:t,onChange:e=>n(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&y()}),(0,a.jsx)(L.$,{onClick:y,className:"bg-blue-600",children:(0,a.jsx)(D.A,{size:18})})]})})]}),(0,a.jsx)(J,{open:c,onOpenChange:o,children:(0,a.jsxs)(U,{className:"bg-gray-800 text-white",children:[(0,a.jsx)($,{children:(0,a.jsx)(K,{children:"Settings"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{children:"Model"}),(0,a.jsxs)(_,{value:d.model,onValueChange:e=>x(s=>({...s,model:e})),children:[(0,a.jsx)(S,{value:"gpt-4o-2024-08-06",children:"GPT-4o"}),(0,a.jsx)(S,{value:"gpt-4-turbo-2024-04-09",children:"GPT-4-Turbo"}),(0,a.jsx)(S,{value:"gpt-4o-mini-2024-07-18",children:"gpt-4o-mini"}),(0,a.jsx)(S,{value:"o1-mini-2024-09-12",children:"o1-mini"}),(0,a.jsx)(S,{value:"o1-preview-2024-09-12",children:"o1-preview"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{children:["Temperature: ",d.temperature]}),(0,a.jsx)(M,{value:[d.temperature],onValueChange:e=>{let[s]=e;return x(e=>({...e,temperature:s}))},min:0,max:1,step:.1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{children:"Vector Store"}),(0,a.jsxs)(_,{value:d.vectorStore,onValueChange:e=>x(s=>({...s,vectorStore:e})),children:[(0,a.jsx)(S,{value:"leaps",children:"Leaps"}),(0,a.jsx)(S,{value:"leapsjson",children:"Leaps Json"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{children:"System Prompt"}),(0,a.jsx)("textarea",{value:d.prompt,onChange:e=>x(s=>({...s,prompt:e.target.value})),className:"w-full h-32 bg-gray-700 rounded p-2"})]}),(0,a.jsx)(L.$,{onClick:N,className:"w-full bg-blue-600",children:"Save Settings"})]})]})})]})},H=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("https://leaps-scraper.onrender.com/business/get_all_businesses"),t=await e.json();s(t.data||[])}catch(e){console.error("Error fetching businesses:",e)}finally{n(!1)}})()},[]),t)?(0,a.jsx)("p",{className:"text-center",children:"Loading businesses..."}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsx)(i,{className:"bg-gray-800 shadow-lg cursor-pointer hover:bg-gray-700 transition",children:(0,a.jsxs)(d,{className:"p-4 text-center",children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:e.description})]})},e._id))})},Q="https://leaps-scraper.onrender.com",Y={getBusinessById:async e=>{let s=await fetch("".concat(Q,"/business/get_business_by_id/").concat(e));return(await s.json()).data},getReportForBusiness:async e=>{let s=await fetch("".concat(Q,"/report/get_report_for_business/").concat(e));return(await s.json()).data||null},getPagesByBusinessId:async e=>{let s=await fetch("".concat(Q,"/pages/get_pages_by_business_id/").concat(e));return(await s.json()).data||[]},getPageById:async e=>{try{var s,t;let a=await fetch("".concat(Q,"/pages/get_page_by_id/").concat(e)),r=await a.json();return(null===(t=r.data)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.content)||"No content available."}catch(e){return console.error("Error fetching webpage content:",e),"Error loading page content."}}};var ee=t(2044),es=t(1017),et=t(2265),ea=t(5496);let er=e=>{let{report:s}=e;if(!s)return(0,a.jsx)(i,{className:"bg-gray-800/50 border-gray-700",children:(0,a.jsx)(d,{children:(0,a.jsx)("p",{className:"text-center text-gray-400",children:"No report data available"})})});let t=e=>s.insights_count[e]||0,r=e=>s.insights_breakdown?Object.entries(s.insights_breakdown).filter(s=>{let[t]=s;return"Good Practice"===e?t.includes("Good practice for SEO"):"Needs Attention"===e?t.includes("missing alt text")||t.includes("Consider adding more content"):t.includes("No canonical tag")||t.includes("No meta description")}).map(e=>{let[s,t]=e;return{insight:s,count:t}}):[];return(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(i,{className:"bg-red-950/50 border-red-800",children:[(0,a.jsx)(c,{className:"pb-2",children:(0,a.jsxs)(o,{className:"flex items-center space-x-2",children:[(0,a.jsx)(es.A,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("span",{children:"Critical Issues"})]})}),(0,a.jsxs)(d,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-red-400 mb-2",children:t("Immediate Action Required")}),(0,a.jsx)(v,{className:"h-32",children:r("Immediate Action Required").map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsxs)(j,{variant:"destructive",className:"shrink-0",children:[e.count,"x"]}),(0,a.jsx)("span",{className:"text-sm text-red-200",children:e.insight})]},s))})]})]}),(0,a.jsxs)(i,{className:"bg-yellow-950/50 border-yellow-800",children:[(0,a.jsx)(c,{className:"pb-2",children:(0,a.jsxs)(o,{className:"flex items-center space-x-2",children:[(0,a.jsx)(et.A,{className:"w-5 h-5 text-yellow-400"}),(0,a.jsx)("span",{children:"Warnings"})]})}),(0,a.jsxs)(d,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:t("Needs Attention")}),(0,a.jsx)(v,{className:"h-32",children:r("Needs Attention").map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsxs)(j,{variant:"warning",className:"bg-yellow-900 text-yellow-200 shrink-0",children:[e.count,"x"]}),(0,a.jsx)("span",{className:"text-sm text-yellow-200",children:e.insight})]},s))})]})]}),(0,a.jsxs)(i,{className:"bg-green-950/50 border-green-800",children:[(0,a.jsx)(c,{className:"pb-2",children:(0,a.jsxs)(o,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.A,{className:"w-5 h-5 text-green-400"}),(0,a.jsx)("span",{children:"Good Practices"})]})}),(0,a.jsxs)(d,{children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-400 mb-2",children:t("Good Practice")}),(0,a.jsx)(v,{className:"h-32",children:r("Good Practice").map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsxs)(j,{variant:"success",className:"bg-green-900 text-green-200 shrink-0",children:[e.count,"x"]}),(0,a.jsx)("span",{className:"text-sm text-green-200",children:e.insight})]},s))})]})]})]})})},en=()=>{let{id:e}=(0,n.useRouter)().query,[s,t]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(null),[m,b]=(0,r.useState)(!0),[j,y]=(0,r.useState)("overview");(0,r.useEffect)(()=>{e&&(async()=>{try{let[s,a]=await Promise.all([Y.getBusinessById(e),Y.getReportForBusiness(e)]);t(s),x(a)}catch(e){console.error("Error fetching initial data:",e)}finally{b(!1)}})()},[e]);let v=async()=>{if(e)try{let s=await Y.getPagesByBusinessId(e);c(s)}catch(e){console.error("Error fetching webpages:",e)}},N=async e=>await Y.getPageById(e._id);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 p-6 text-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Built by: @jgx02 v0.1.10"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Leaps & Rebounds"}),(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{asChild:!0,children:(0,a.jsx)("button",{className:"outline-none",children:(0,a.jsx)(ee.A,{className:"h-8 w-8 text-gray-400 hover:text-white cursor-pointer"})})}),(0,a.jsxs)(p,{className:"w-48 bg-gray-800 border-gray-700",children:[(0,a.jsx)(u,{className:"text-gray-200 focus:text-white focus:bg-gray-700",children:"Settings"}),(0,a.jsx)(f,{className:"bg-gray-700"}),(0,a.jsx)(u,{className:"text-gray-200 focus:text-white focus:bg-gray-700",children:"Sign Out"})]})]})]})]}),(0,a.jsx)(F,{activeTab:j,onTabChange:e=>{y(e),"webpages"===e&&v()},leftTabs:[{id:"overview",label:"Overview"},{id:"traffic",label:"Traffic"},{id:"analytics",label:"Analytics"},{id:"pageReports",label:"Reports"},{id:"webpages",label:"Webpages"},{id:"files",label:"Files"}],rightTabs:[{id:"chat",label:"Chat"},{id:"competitor",label:"Competitor Lookup"},{id:"profile",label:"Profile"}]}),m?(0,a.jsx)("p",{className:"text-center",children:"Loading business details..."}):s?(0,a.jsx)(i,{className:"bg-gray-800 shadow-lg",children:(0,a.jsxs)(d,{className:"p-6",children:["overview"===j&&(0,a.jsx)(er,{report:o}),"traffic"===j&&(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Traffic view coming soon"}),"analytics"===j&&(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Analytics view coming soon"}),"pageReports"===j&&(0,a.jsx)(C,{report:o}),"webpages"===j&&(0,a.jsx)(z,{webpages:l,onPageClick:N}),"files"===j&&(0,a.jsx)("div",{className:"text-center text-gray-400 py-8",children:"Files view coming soon"}),"chat"===j&&(0,a.jsx)(X,{}),"competitor"===j&&(0,a.jsx)(H,{}),"profile"===j&&(0,a.jsx)(O,{business:s})]})}):(0,a.jsx)("p",{className:"text-center",children:"Business not found."})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[791,19,74,636,593,792],()=>s(2733)),_N_E=e.O()}]);