(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{5894:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/onboarding",function(){return s(9107)}])},9540:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>i,TN:()=>c});var r=s(4848),a=s(6540),n=s(2732),o=s(8019);let l=(0,n.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=a.forwardRef((e,t)=>{let{className:s,variant:a,...n}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,o.cn)(l({variant:a}),s),...n})});i.displayName="Alert",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,o.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})}).displayName="AlertTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("text-sm [&_p]:leading-relaxed",s),...a})});c.displayName="AlertDescription"},9748:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var r=s(4848);s(6540);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"bg-primary text-white hover:bg-primary/90",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100",link:"text-blue-600 underline-offset-4 hover:underline",purple:"bg-indigo-600 text-white hover:bg-indigo-600"})[e]},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return({default:"h-9 px-4 py-2",sm:"h-8 px-3 py-1 text-sm",lg:"h-12 px-8 py-3",icon:"h-9 w-9 p-2"})[e]},o=e=>{let{className:t="",children:s,variant:o="default",size:l="default",...i}=e;return(0,r.jsx)("button",{className:"\n      rounded-lg \n      font-medium \n      transition-colors \n      duration-200 \n      focus:outline-none \n      focus:ring-2 \n      focus:ring-blue-500 \n      ".concat(a(o),"\n      ").concat(n(l),"\n      ").concat(t,"\n    "),...i,children:s})}},5130:(e,t,s)=>{"use strict";s.d(t,{p:()=>a});var r=s(4848);s(6540);let a=e=>{let{className:t="",...s}=e;return(0,r.jsx)("input",{className:"w-full px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 bg-gray-700 text-white ".concat(t),...s})}},6873:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var r=s(4848),a=s(6540),n=s(6669),o=s(8019);let l=a.forwardRef((e,t)=>{let{className:s,value:a,indicatorClassName:l,...i}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800",s),...i,children:(0,r.jsx)(n.C1,{className:(0,o.cn)("h-full w-full flex-1 bg-blue-600 transition-all dark:bg-blue-500",l),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});l.displayName=n.bL.displayName},8019:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(4164),a=s(856);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},9107:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(4848),a=s(6540),n=s(6715);let o="http://127.0.0.1:8000",l=async e=>{try{console.log("Starting website submission for URL:",e);let t=localStorage.getItem("jwt_token");if(!t)throw Error("No authentication token found");console.log("Making API request to analyze endpoint");let s=await fetch("".concat(o,"/api/data/analysis/start"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({website_url:e})});console.log("Received response:",s.status);let r=await s.json();if(console.log("Response data:",r),!s.ok)throw Error(r.detail||r.message||"Failed to submit website");return{success:!0,message:r.message,url:r.website_url||e,status:r.status,scan_status:r.scan_status,business_id:r.business_id}}catch(e){return console.error("Error in submitWebsiteForAnalysis:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}},i=async()=>{try{let e=localStorage.getItem("jwt_token");if(!e)throw Error("No authentication token found");console.log("Requesting status update...");let t=await fetch("".concat(o,"/api/data/analysis/status"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});console.log("Status response received:",t.status);let s=await t.json();if(console.log("Status data:",s),!t.ok)throw Error(s.detail||"Failed to check status");return{success:!0,status:s.status,scan_status:s.scan_status,error_message:s.error_message,pages_scanned:s.pages_scanned,total_pages:s.total_pages,current_step:s.current_step,estimated_time_remaining:s.estimated_time_remaining,progress_percentage:s.progress_percentage,business_id:s.business_id,report_generated:s.report_generated,last_updated:s.last_updated,website_url:s.websiteUrl||s.website_url,isComplete:"complete"===s.status||s.isComplete}}catch(e){return console.error("Error checking status:",e),{success:!1,error:e instanceof Error?e.message:"An unknown error occurred"}}};var c=s(9748),d=s(6873),u=s(1870),g=s(8631),m=s(7217),p=s(5130),h=s(9540);let x=()=>{let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(1),[o,x]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[f,w]=(0,a.useState)(!1),[_,v]=(0,a.useState)(""),[j,N]=(0,a.useState)({pages_scanned:0,total_pages:0,current_step:"",estimated_time_remaining:300,progress_percentage:0});(0,a.useEffect)(()=>{let t=null,s=async()=>{if(console.log("Starting poll iteration, isProcessing:",f),f)try{let r=await i();if(console.log("Poll response data:",r),!r.success)throw console.error("Poll response indicates failure:",r),Error(r.error||"Failed to check status");N({pages_scanned:r.pages_scanned||0,total_pages:r.total_pages||0,current_step:r.current_step||"initializing",estimated_time_remaining:r.estimated_time_remaining||300,progress_percentage:r.progress_percentage||0});let a=r.scan_status||r.status||"processing";console.log("Current scan status:",a),"completed"===a||"complete"===a?(console.log("Analysis complete, preparing for dashboard redirect"),w(!1),e.push("/dashboard")):"error"===a?(console.error("Scan reported error status:",r.error_message),v(r.error_message||"An error occurred during processing"),w(!1)):(console.log("Processing continues, scheduling next poll"),t=setTimeout(s,5e3))}catch(e){console.error("Error during poll:",e),f&&(console.log("Scheduling retry despite error"),t=setTimeout(s,5e3))}};return f&&(console.log("Initial poll setup"),s()),()=>{t&&(console.log("Cleaning up poll timer"),clearTimeout(t))}},[f,e]);let k=async()=>{if(!o)return v("Please enter your website URL"),!1;y(!0),v("");try{console.log("Submitting website for analysis:",o);let e=await l(o);if(console.log("Submission result:",e),!e.success)throw console.error("Submission failed:",e.error),Error(e.error||"Submission failed");return console.log("Setting processing state to true"),w(!0),A(),!0}catch(e){return console.error("Error during submission:",e),v(e instanceof Error?e.message:"Failed to submit website. Please try again."),y(!1),!1}},S=async()=>{try{console.log("Checking processing status...");let t=await i();if(console.log("Status response:",t),!t.success)throw Error(t.error||"Failed to check status");N({pages_scanned:t.pages_scanned||0,total_pages:t.total_pages||0,current_step:t.current_step||"initializing",estimated_time_remaining:t.estimated_time_remaining||300,progress_percentage:t.progress_percentage||0});let s=t.scan_status||"unknown",r=t.status||"unknown";if("completed"===s||"complete"===r)console.log("Analysis complete, redirecting to dashboard"),e.push("/dashboard");else if("error"===s||"error"===r){let e=t.error_message||t.error||"Processing failed";console.error("Processing error:",e),v(e),w(!1)}else["initializing","scanning","generating_report","processing"].includes(s)?(console.log("Still processing, continuing to poll..."),setTimeout(S,5e3)):(console.error("Unknown status:",s),v("Unknown processing status"),w(!1))}catch(e){console.error("Status check error:",e),v("Error checking status. Please contact support."),y(!1),w(!1)}},A=()=>{S()},E=async()=>{if(console.log("handleNext called, current step:",t),2===t&&!o){v("Please enter your website URL");return}if(2===t){console.log("Attempting URL submission");let e=await k();console.log("URL submission result:",e),e&&(console.log("Moving to next step"),s(t+1))}else 3===t?(console.log("Redirecting to dashboard"),e.push("/dashboard")):(console.log("Moving to next step"),s(t+1))};return f?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 flex flex-col items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl space-y-8 text-center",children:[(0,r.jsx)(m.A,{className:"w-16 h-16 text-blue-400 mx-auto animate-pulse"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Analyzing Your Website"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-gray-400",children:["Current Step: ",j.current_step]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-lg border border-gray-700",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[(0,r.jsxs)("span",{children:["Pages Scanned: ",j.pages_scanned]}),(0,r.jsxs)("span",{children:["Total Pages: ",j.total_pages||"Calculating..."]})]}),(0,r.jsx)(d.k,{value:j.progress_percentage,className:"w-full h-2 bg-gray-700"})]}),(0,r.jsxs)("p",{className:"text-gray-400",children:["Estimated Time Remaining: ",(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(j.estimated_time_remaining)]})]}),_&&(0,r.jsx)(h.Fc,{variant:"destructive",className:"mt-4",children:(0,r.jsx)(h.TN,{children:_})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-gray-800 flex flex-col items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl space-y-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Scope Labs"}),(0,r.jsx)("p",{className:"text-gray-400",children:"AI-Powered Digital Competition Analysis"})]}),(0,r.jsx)(d.k,{value:t/3*100,className:"w-full h-2 bg-gray-700"}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-lg space-y-8 border border-gray-700",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(e=>{switch(e){case 1:return(0,r.jsx)(u.A,{className:"w-12 h-12 text-blue-400"});case 2:return(0,r.jsx)(g.A,{className:"w-12 h-12 text-blue-400"});case 3:return(0,r.jsx)(m.A,{className:"w-12 h-12 text-blue-400"});default:return null}})(t)}),1===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"Welcome to Scope Labs"}),(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"Get ready to transform your digital strategy with AI-powered competitor analysis and automation."}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[(0,r.jsxs)("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Real-time Analysis"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Track competitor movements as they happen"})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-white font-semibold mb-2",children:"AI Automation"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Implement optimizations automatically"})]})]})]}),2===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"Let's Analyze Your Website"}),(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"Enter your website URL to begin the competitive analysis."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(p.p,{type:"url",placeholder:"https://your-website.com",value:o,onChange:e=>x(e.target.value),className:"w-full bg-gray-900 border-gray-700 text-white"}),_&&(0,r.jsx)(h.Fc,{variant:"destructive",children:(0,r.jsx)(h.TN,{children:_})})]})]}),3===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"Analysis in Progress"}),(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"Your website analysis has begun. You can now proceed to your dashboard."}),(0,r.jsxs)("div",{className:"bg-gray-900/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Initial Setup Complete"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"While your full analysis may take 5-10 minutes to complete, you can start exploring your dashboard now."})]})]}),(0,r.jsxs)(c.$,{onClick:E,disabled:2===t&&b,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-6 rounded-lg transition-all duration-200 ease-in-out flex items-center justify-center space-x-2",children:[(0,r.jsx)("span",{children:2===t&&b?"Processing...":3===t?"Go to Dashboard":2===t?"Start Analysis":"Continue"}),2===t&&b&&(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})]}),(0,r.jsxs)("div",{className:"text-center text-gray-500 text-sm",children:["Step ",t," of ",3]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[399,483,636,593,792],()=>t(5894)),_N_E=e.O()}]);